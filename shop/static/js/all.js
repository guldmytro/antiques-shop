var e;function o(e,t){e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.boxSizing="border-box",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)}function r(e,t){e.style.removeProperty("display");let n=window.getComputedStyle(e).display;"none"===n&&(n="block"),e.style.display=n;var o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)}e=function(){"use strict";function e(t){var r=!0,n=!1,o=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function s(e){return e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList}function a(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function e(e){r=!1}function c(){document.addEventListener("mousemove",d),document.addEventListener("mousedown",d),document.addEventListener("mouseup",d),document.addEventListener("pointermove",d),document.addEventListener("pointerdown",d),document.addEventListener("pointerup",d),document.addEventListener("touchmove",d),document.addEventListener("touchstart",d),document.addEventListener("touchend",d)}function d(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(r=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mousedown",d),document.removeEventListener("mouseup",d),document.removeEventListener("pointermove",d),document.removeEventListener("pointerdown",d),document.removeEventListener("pointerup",d),document.removeEventListener("touchmove",d),document.removeEventListener("touchstart",d),document.removeEventListener("touchend",d))}document.addEventListener("keydown",function(e){e.metaKey||e.altKey||e.ctrlKey||(s(t.activeElement)&&a(t.activeElement),r=!0)},!0),document.addEventListener("mousedown",e,!0),document.addEventListener("pointerdown",e,!0),document.addEventListener("touchstart",e,!0),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState&&(n&&(r=!0),c())},!0),c(),t.addEventListener("focus",function(e){var t,n,o;s(e.target)&&(r||(n=(t=e.target).type,"INPUT"===(o=t.tagName)&&i[n]&&!t.readOnly||"TEXTAREA"===o&&!t.readOnly||t.isContentEditable))&&a(e.target)},!0),t.addEventListener("blur",function(e){s(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(n=!0,window.clearTimeout(o),o=window.setTimeout(function(){n=!1},100),(e=e.target).hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added")))},!0),t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host?t.host.setAttribute("data-js-focus-visible",""):t.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var t;window.applyFocusVisiblePolyfill=e;try{t=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(t=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(t)}"undefined"!=typeof document&&e(document)},("object"!=typeof exports||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define(e):e();{const n=document.querySelector("header.header");function t(){var e;document.documentElement.style.setProperty("--height-header",(e=n,Math.ceil(e.offsetHeight)+15+"px"))}t();let e=null;window.onresize=()=>{e&&clearTimeout(e),e=setTimeout(t,1e3)}}{const i=document.querySelector(".active-filters");i&&(i.onclick=e=>{e.target.classList.contains("delete")&&e.target.parentElement.remove()})}{const s=document.querySelector(".catalog-aside");s&&s.addEventListener("click",function(e){if(!e.target.classList.contains("filter-group__title"))return!1;var t,n=e.target.nextElementSibling;n=n,t=200,("none"===window.getComputedStyle(n).display?r:o)(n,t),e.target.classList.toggle("closed")})}{const a=document.querySelector(".product-gallery__thumbs"),c=document.querySelector(".product-gallery__main"),d=(a&&a.addEventListener("click",function(e){if(!e.target.classList.contains("thumbs__img"))return!1;const t=e.target.getAttribute("data-anchor"),n=c.querySelector(t);if(!n)return!1;c.setAttribute("data-slide",t.split("-")[1]),n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}),document.querySelector(".product-gallery__btn.next")),u=document.querySelector(".product-gallery__btn.prev"),l=c?c.getAttribute("data-max"):0;d&&(d.onclick=function(e){var t=parseInt(c.getAttribute("data-slide"),10),t=t<l?t+1:1;const n=a.querySelector(`[data-anchor="#slide-${t}"]`);n&&n.click()}),u&&(u.onclick=function(e){var t=parseInt(c.getAttribute("data-slide"),10),t=1<t?t-1:l;const n=a.querySelector(`[data-anchor="#slide-${t}"]`);n&&n.click()})}{const m=document.querySelector("#open-search"),h=document.querySelector(".header-search__btn"),y=document.querySelector(".header-search"),v=document.querySelector(".form-search__input");m.addEventListener("click",function(){r(y,150),v.focus()}),h.addEventListener("click",function(){o(y,150),m.focus()})}{const p=document.querySelector(".header__mobile-btn"),g=document.querySelector(".header-menu-wrapper");g.classList.add("transition"),p&&p.addEventListener("click",e=>{e.preventDefault(),g.classList.toggle("active")})}{const f=document.querySelector(".catalog-stats__filters-btn"),b=document.querySelector(".catalog-aside");f&&f.addEventListener("click",e=>{b.classList.toggle("active")})}!function(){new class{constructor(){this.timer=!1,this.URL=new URL(window.location.href),this.params="",this.fetchURL="",this.sidebar=document.querySelector(".catalog-aside"),this.sorting=document.querySelector(".catalog-stats__ordering"),this.searchQuery=document.querySelector('.form-search [name="query"]').value,this.destination=document.querySelector(".products-group-wrapper"),this.activeFilters=document.querySelector(".catalog-stats__active-filters"),this.counterTag=document.querySelector("#product-count"),this.catalog=document.querySelector("main.catalog"),this.currentCheckbox=!1,this.sidebar&&(this.checkboxes=this.sidebar.querySelectorAll('input[type="checkbox"]'),this.initFilters(),this.initEvents())}initFilters=()=>{for(const e of[...this.URL.searchParams]){const t=this.sidebar.querySelector(`[name="${e[0]}"][value="${e[1]}"]`);t&&(t.checked=!0,this.currentCheckbox=t,this.manageButtons())}};initEvents=()=>{this.sidebar.addEventListener("change",this.onFilterChange),this.sorting.addEventListener("change",this.onSortingChange),this.activeFilters.addEventListener("click",this.onRemoveButton)};onFilterChange=e=>{e&&(this.currentCheckbox=e.target),this.setParams(),this.setURL(),this.manageButtons(),this.debounceFetch()};onSortingChange=e=>{this.setParams(),this.setURL(),this.debounceFetch()};onRemoveButton=e=>{var t=e.target.getAttribute("data-name"),e=e.target.getAttribute("data-value");const n=this.sidebar.querySelector(`[name="${t}"][value="${e}"]`);n&&(n.checked=!1,this.currentCheckbox=n,this.onFilterChange())};setParams=()=>{this.params=new URLSearchParams;for(const t of this.checkboxes)t.checked&&this.params.append(t.name,t.value);var e=this.sorting.querySelector(":checked").value;this.params.append("order",e),String(this.searchQuery).trim().length&&this.params.append("query",this.searchQuery.trim())};setURL=()=>{this.URL.search=this.params,this.fetchURL=this.URL.origin+this.URL.pathname+this.URL.search};manageButtons=()=>{var t=this.currentCheckbox.name,n=this.currentCheckbox.value;if(this.currentCheckbox.checked){let e=document.createElement("span");return e.classList.add("active-filters__item"),e.innerHTML=`
                    <button type="button" 
                            data-name="${t}" 
                            data-value="${n}"
                            class="delete" 
                            aria-label="убрать фильтр ${this.currentCheckbox.getAttribute("data-title")}">
                    </button>
                    <span class="text">${this.currentCheckbox.getAttribute("data-title")}</span>`,this.activeFilters.append(e)}try{this.activeFilters.querySelector(`[data-name="${t}"][data-value="${n}"]`).parentElement.remove()}catch(e){}};debounceFetch=e=>{this.timer&&clearTimeout(this.timer),this.timer=setTimeout(async()=>{this.catalog.classList.add("loading");try{var t=await fetch(this.fetchURL,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}).then(e=>{if(e.ok)return e.text();throw new Error({message:"Bad request"})});window.history.pushState(null,null,this.fetchURL);let e=document.createElement("div");e.innerHTML=t,this.destination.innerHTML=e.querySelector(".products-group-wrapper").innerHTML,e.remove(),this.setCount(),this.catalog.classList.remove("loading")}catch(e){console.warn(e)}},700)};setCount=()=>{let e=0,t=this.destination.querySelector(".products-group");t&&(e=t.getAttribute("data-count")),this.counterTag.innerText=parseInt(e,10)}}}();